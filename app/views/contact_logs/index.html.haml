.card
  = render 'layouts/card_header', action_name: 'index'
  .card-body
    -# TODO: change path here as needed, will it work with paging?
    = render 'layouts/filter', search: @contact_log_search, path: contact_logs_path
    = paginate @contact_logs, theme: 'twitter-bootstrap-4'

    %table.table.table-bordered
      %tr
        = render 'layouts/sort_headers', search: @contact_log_search

      - @contact_logs.each do |record|
        %tr{ class: table_row_style(record) }
          %td= link_to format_datetime(record.created_at), record
          - if RadConfig.twilio_enabled?
            %td= enum_to_translated_option record, :service_type
            %td= enum_to_translated_option record, :sms_log_type
          %td
            - if record.from_user.present?
              %p= secured_link record.from_user
            %p= record.from_number
            %p= record.from_email
          %td
            - record.contact_log_recipients.each do |recipient|
              - if recipient.to_user.present?
                %p= secured_link recipient.to_user
              %p= recipient.phone_number
              %p= recipient.email
          %td= secured_link record.record
          %td= record.content
          - if RadConfig.twilio_enabled?
            %td= format_boolean record.sms_opt_out_message_sent
          %td= format_boolean record.success?

    = paginate @contact_logs, theme: 'twitter-bootstrap-4'
