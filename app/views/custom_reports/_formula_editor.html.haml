.modal.fade{ tabindex: '-1',
             aria: { labelledby: 'formula-editor-modal-label', hidden: 'true' },
             data: { formula_editor_target: 'modal' } }
  .modal-dialog.modal-lg
    .modal-content
      .modal-header
        %h5.modal-title#formula-editor-modal-label
          Transform Editor
          %small.text-muted.ms-2{ data: { formula_editor_target: 'columnName' } }
        %button.btn-close{ type: 'button', data: { bs_dismiss: 'modal' }, aria: { label: 'Close' } }
      .modal-body
        .mb-3
          .mb-3{ data: { formula_editor_target: 'transformsList' } }
        .card.mb-3.shadow-sm
          .card-body
            %label.form-label.mb-2 Add Transformation
            %select.form-select.mb-3.selectpicker{ data: { action: 'change->formula-editor#previewTransform',
                                                           formula_editor_target: 'transformSelect' } }
              %option{ value: '' } Choose a transformation...
              - RadReports::FormulaRegistry.grouped_options.each do |category, formulas|
                %optgroup{ label: category }
                  - formulas.each do |label, type|
                    %option{ value: type }= label

            %div{ data: { formula_editor_target: 'transformPreview' } }

            .mt-2.d-none{ data: { formula_editor_target: 'addButton' } }
              %button.btn.btn-primary.btn-sm.w-100{ type: 'button',
                                                    data: { action: 'click->formula-editor#addTransform' } }
                %i.fa.fa-plus.me-1
                Add to List
      .modal-footer
        %button.btn.btn-secondary{ type: 'button', data: { bs_dismiss: 'modal' } } Cancel
        %button.btn.btn-primary{ type: 'button', data: { action: 'click->formula-editor#saveFormula' } } Apply Formula
