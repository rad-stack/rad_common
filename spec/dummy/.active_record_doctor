ActiveRecordDoctor.configure do
  detector :incorrect_dependent_option, enabled: false

  detector :unindexed_foreign_keys,
           ignore_tables: ['notification_settings', 'notification_security_roles', 'user_clients']

  detector :undefined_table_references,
           ignore_models: ['ActiveStorage::Record',
                           'ApplicationRecord',
                           'ActionMailbox::Record',
                           'ActionMailbox::InboundEmail',
                           'ActionText::Record']

  detector :extraneous_indexes,
           ignore_indexes: ['index_saved_search_filters_on_user_id', 'index_user_security_roles_on_security_role_id']

  detector :incorrect_length_validation,
           ignore_attributes: ['User.authy_id',
                               'User.invitation_token',
                               'User.unlock_token',
                               'Company.valid_user_domains',
                               'Company.timezone']

  detector :missing_unique_indexes, ignore_models: ['Duplicate']

  detector :missing_foreign_keys, ignore_columns: ['users.authy_id']

  detector :missing_presence_validation, enabled: false
end
